AWX API DEMO REST API機能の検討
=================================

一部の申請について、事前に設定したスケジュールで自動的に実行することが必要になると想定される。
また、IaaSチームの作業担当者・管理者は、未対応の申請や対応期限の迫った申請をアプリケーションの画面を確認せずとも、メールやTeamsで通知することにより把握できることが有用であると考える。

本ドキュメントでは、アプリケーションの外部から申請およびその一覧を参照し、指定した申請を実行する機能について検討する。

## 担当者ごとの関心事については、以下の項目を想定する
* 申請者
  - 自身の申請のスケジュール実行

* IaaSチームの作業担当者・管理者
  - 定型的な申請のスケジュール実行
    - 定期的な実行が必要な管理ジョブなどをスケジュール実行したい。
  - 申請者からの一部申請の対応
    - 担当者が介入せずにスケジュール実行したい。
  - 全体の申請状況の把握
    - 作業担当者が割り当てられていない申請の状況を把握したい。
    - リリース希望日の近い申請を把握したい。

## スケジューリング機能について
* スケジューリング機能については、アプリケーション内部に実装せずに、OS標準のcronやタスクスケジューラまたはジョブ管理ソフト（rundeckなど）を利用できるようにする。
* 外部のスケジューラを利用することにより、実行結果の通知や自動リトライといった高度な機能を追加実装なしに利用できるメリットがある。

## インタフェースについて
特定のプログラミング言語に依存しない、汎用的なREST APIをインタフェースとする。

## REST API機能の概要
1. アプリケーションの外部からREST APIを介して、申請の一覧を参照する。
2. アプリケーションの外部からREST APIを介して、申請の一覧を条件（ステータス、IaaS作業担当者、リリース希望日など）に指定して参照する。
3. アプリケーションの外部からREST APIを介して、申請の詳細を参照する。（要申請ID）
4. アプリケーションの外部からREST APIを介して、申請を実行する。（要申請ID）
5. REST APIを呼び出し可能なユーザは、管理者ロールを必須とする。（スケジューラからの呼び出し時は、専用ユーザを作成して運用する）

## エンドポイント一覧
| メソッド | エンドポイント                            | 用途                                                       |
|---------|----------------------------------------|-----------------------------------------------------------|
| GET     | /api/requests                          | 申請一覧（フィルタ: ステータス、IaaS作業担当者、リリース希望日など） |
| GET     | /api/requests/{request_id}             | 申請詳細                                                    |
| POST    | /api/requests/{request_id}/execute     | 申請の実行                                                  |
